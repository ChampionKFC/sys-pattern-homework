# Домашнее задание к занятию "`Базы данных, их типы`" - `Фадеев Артём`


###Задание 1. СУБД


Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.
Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.
1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?
1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.
1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?
1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.
1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?
1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?
Приведите ответ в свободной форме.


ОТВЕТ: 
1.1. Для бюджетирования проектов, формирования финансовых аналитических отчётов и прогнозирования рисков рекомендуется использовать реляционные СУБД, такие как PostgreSQL или Microsoft SQL Server. Например, компания может создать таблицы "Проекты" для хранения информации о проектах, "Финансовые_отчеты" для аналитических данных, и "Риски" для прогнозирования возможных рисков и их вероятности.


1.1.* Для ускорения хеширования данных, компания может использовать API in-memory баз данных, таких как Redis. Например, если нужно быстро получать хеши для различных проектов, Redis предоставит высокую производительность при запросах к хеш-таблицам.


1.2. Для управления лендингами и CRM компания может воспользоваться гибкими и быстрыми СУБД, например, MongoDB. Например, можно создать коллекции "Лендинги" для хранения информации о каждом девелоперском проекте, и коллекции "Лиды" для данных, которые стекаются в CRM.


1.2.* Если как лендинги, так и CRM используют документы в формате JSON, компания может использовать одну СУБД, например, MongoDB, и создать отдельные коллекции для каждой задачи. Например, коллекция "Лендинги" и "CRM_Лиды".


1.3. Для отдела контроля качества рекомендуется использовать реляционную СУБД, такую как PostgreSQL. Например, можно создать таблицу "Корпоративные_нормы" для хранения правил и стандартов, и таблицу "Обучающий_материал" для хранения обучающих материалов.


1.3.* Если компания уже использует PostgreSQL для других задач, то может использовать уже существующую СУБД, создав новые таблицы или схемы для отдела контроля качества. Например, можно создать схему "QC" и разместить там все таблицы, связанные с контролем качества.


1.4. Для задач логистики, связанных с формированием маршрутов доставки и распределением курьеров, рекомендуется использовать графовые СУБД, например, Neo4j. Например, компания может создать узлы для каждого объекта доставки и курьеров, а связи между узлами будут представлять маршруты доставки.


1.4.* Отделу закупок, возможно, удобнее будет использовать реляционную СУБД, чтобы хранить информацию о поставщиках и закупках. В этом случае, компания может использовать комбинацию графовой СУБД Neo4j для логистических задач и реляционной СУБД PostgreSQL для задач закупок.


1.5.* Возможно использование одной СУБД для всех перечисленных задач. Например, компания может использовать реляционную СУБД PostgreSQL, создавая различные таблицы или схемы для каждой предметной области и использовать графовые возможности PostgreSQL для задач логистики. Это позволит централизованно управлять данными и иметь единую точку доступа к информации. Однако, выбор оптимального решения зависит от объема данных, сложности задач и требований каждой предметной области.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.
2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?
Приведите ответ в свободной форме.

Ответ:

2.1. Действия для успешного завершения транзакции пополнения баланса счёта телефона:
Идентификация пользователя: Пользователь должен пройти процесс идентификации, предоставив необходимые данные для проверки его личности, такие как логин, пароль или другие методы аутентификации.


Выбор способа оплаты: Пользователь выбирает предпочтительный метод оплаты из доступных вариантов, таких как кредитная или дебетовая карта, электронный кошелёк и т.д.


Ввод данных оплаты: Пользователь вводит соответствующие данные оплаты, такие как номер карты, срок действия, CVV-код и т.д., в зависимости от выбранного способа оплаты.


Авторизация платежа: Система передаёт данные оплаты на платежный шлюз или банк, где происходит авторизация транзакции и проверка наличия необходимых средств на счете пользователя.


Подтверждение платежа: После успешной авторизации, система получает подтверждение о завершении транзакции, что позволяет ей двигаться к завершающему этапу.


Обновление баланса: Баланс счёта телефона пользователя обновляется на основе успешной транзакции, и сумма пополнения добавляется к его текущему балансу, тем самым завершая успешное пополнение счёта.


2.1.* Действия для успешного автоплатежа:


1-5: Эти шаги идентичны обычному пополнению счёта, где пользователь предоставляет данные оплаты, и система авторизует транзакцию. Однако, в случае автоплатежа, система выполняет транзакцию автоматически на основе предварительных настроек пользователя.


Автоматическое обновление баланса: Поскольку пользователь уже разрешил системе автоматически пополнять свой счёт при определенных условиях, система автоматически обновляет баланс после успешной авторизации транзакции. Этот процесс не требует дополнительных действий со стороны пользователя и обеспечивает автоматическое пополнение счёта при необходимости.


---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.
3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.
Приведите ответ в свободной форме.

Ответ:

3.1. Пять преимуществ SQL-систем по отношению к NoSQL:

Структурированные данные: SQL-системы работают с реляционными базами данных, что обеспечивает четкую и строгую структуру данных. Это особенно полезно в случае, когда данные имеют жесткую схему, и важна целостность информации. NoSQL базы данных, напротив, могут быть более гибкими в структуре данных, но при этом могут потерять строгость и точность.

Мощные возможности запросов: SQL-системы обладают высокоэффективными инструментами для составления и выполнения сложных запросов. Язык SQL предоставляет разнообразные операции для агрегации данных, объединения таблиц, фильтрации, сортировки и других манипуляций с данными. В то время как NoSQL базы данных могут ограничиваться более простыми операциями.

ACID-транзакции: SQL-системы поддерживают ACID-транзакции, что означает, что они гарантируют атомарность, согласованность, изолированность и долговечность транзакций. Это обеспечивает надежность и целостность данных даже в случае сбоев или ошибок. Некоторые NoSQL базы данных, в зависимости от типа, могут быть менее строгими в отношении транзакций.

Широко распространённые и зрелые технологии: SQL-системы имеют длительную историю и широкое распространение, что делает их хорошо изученными и зрелыми технологиями. Есть множество опытных специалистов и средств разработки, что делает работу с SQL-системами более удобной и предсказуемой.

Богатая экосистема: SQL-системы обладают обширной экосистемой инструментов и библиотек, предназначенных для работы с данными, отчетности, аналитики и бизнес-интеллекта. Это включает в себя разнообразные программы для администрирования, визуализации данных, ORM (Object-Relational Mapping) и многое другое. NoSQL-системы также имеют свои инструменты, но экосистема SQL-технологий более развита и обширна.

3.1.* Преимущества NewSQL систем перед SQL и NoSQL:

Гибкость и масштабируемость: NewSQL системы сочетают преимущества SQL и NoSQL, обеспечивая высокую гибкость и масштабируемость. Они могут работать с различными моделями данных, поддерживать горизонтальное масштабирование и легко расширяться с ростом объемов информации.

Высокая производительность: NewSQL системы оптимизированы для обработки больших объемов данных и сложных запросов. Они стремятся предоставлять быстрый доступ к данным, как это делают NoSQL базы данных, но при этом сохраняют мощные возможности SQL для запросов и аналитики.

Поддержка ACID-транзакций: Как SQL-системы, NewSQL обеспечивают ACID-транзакции, обеспечивая надежность и целостность данных.

Повышенная надёжность: NewSQL системы активно работают над повышением отказоустойчивости, предотвращением единой точки отказа и обеспечением репликации данных, что делает их надежными для критически важных приложений.

Интеграция с существующими системами: NewSQL системы обладают хорошей совместимостью с существующими SQL-инфраструктурами и приложениями, что упрощает их внедрение и интеграцию в уже существующие системы.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.
На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?
Приведите ответ в свободной форме.

Ответ:

При необходимости производить большое количество вычислений с огромным объемом данных на 1000 машинах, выбор типа СУБД и модели распределенных вычислений критически важен для обеспечения эффективности и масштабируемости системы. Важными критериями выбора будут производительность, параллелизм, масштабируемость и удобство администрирования. Основываясь на этом, можно рассмотреть следующие варианты:


Тип СУБД:
NewSQL или распределенные SQL-системы: Эти СУБД сочетают преимущества SQL и NoSQL баз данных, обеспечивая гибкость и масштабируемость. Они поддерживают высокую производительность, ACID-транзакции и устойчивы к отказам. Например, CockroachDB, Google Spanner, VoltDB.
NoSQL (горизонтально масштабируемые): NoSQL базы данных, такие как Apache Cassandra или Amazon DynamoDB, могут быть хорошим выбором, если данные можно распределить горизонтально и запросы не требуют сложных операций объединения или агрегации.


Модель распределенных вычислений:
MapReduce: Для параллельной обработки большого объема данных, MapReduce модель может быть эффективным выбором. Например, Apache Hadoop, Apache Spark или Google Cloud Dataflow. MapReduce разделяет вычисления на две основные фазы - "map" и "reduce", что упрощает параллельное выполнение на множестве машин.
Потоковая обработка (Streaming): Если данные должны быть обработаны в режиме реального времени, потоковая обработка может быть подходящим вариантом. Apache Kafka Streams и Apache Flink предоставляют возможности для обработки данных в потоке, а также гарантии масштабируемости.


Облачные решения:
Облачные провайдеры, такие как Amazon Web Services (AWS), Google Cloud Platform (GCP) и Microsoft Azure, предоставляют управляемые сервисы баз данных, такие как Amazon DynamoDB, Google Bigtable и Azure Cosmos DB, которые обеспечивают автоматическое масштабирование и высокую доступность без необходимости заботиться о деталях администрирования.


Выбор конкретного типа СУБД и модели распределенных вычислений зависит от характера данных, типа запросов и требований к производительности и масштабируемости. Важно также учитывать опыт и знания команды, которая будет поддерживать и разрабатывать систему, чтобы выбрать оптимальное решение и успешно реализовать большой объем вычислений на 1000 машинах.


---

